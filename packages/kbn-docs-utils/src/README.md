# Autogenerated API documentation.

[RFC](https://github.com/elastic/kibana/blob/main/legacy_rfcs/text/0014_api_documentation.md).

This package builds and validates API documentation for Kibana plugins and packages. Use `node scripts/build_api_docs` to emit docs to `api_docs/`, or `node scripts/check_package_docs` to validate JSDoc without writing files.

## CLI commands.

### Build API docs (`node scripts/build_api_docs`).
- Generates docs into `api_docs/` using [`src/build_api_docs_cli.ts`](./build_api_docs_cli.ts).
- `--plugin <id>` limits to a single plugin or package; `--package` is an alias.
- `--references` collects references for API items.
- `--stats <any|comments|exports>` is deprecated and routes validation to `check_package_docs` without writing docs.

### Check package docs (`node scripts/check_package_docs`).
- Runs validation only (no docs written) via [`src/check_package_docs_cli.ts`](./check_package_docs_cli.ts); output folder is `api_docs_check/`.
- `--plugin <id>` and `--package <id>` filter targets; omit to check all plugins.
- `--check <any|comments|exports|all>` selects checks; defaults to `all` (equivalent to `any`, `comments`, and `exports`).
- Multiple `--check` flags combine checks.
- Exits with a non-zero code if any selected checks fail.

### Update fixture comments (`node packages/kbn-docs-utils/src/integration_tests/scripts/update_fixture_comments.js`).
Reads the `plugin_a.stats.json` snapshot and updates fixture files with `// Expected issues:` comment blocks. This helps keep fixture files annotated with their expected validation issues for easier test maintenance. Run after modifying fixtures or updating validation logic.

## Validation rules.
- `any` check: fails when API declarations use `any` (`TypeKind.AnyKind`).
- `comments` check: fails when descriptions are missing for API items, including destructured parameters unless either the parent parameter or all properties are documented; includes missing `@returns` for non-void signatures, parameter count mismatches between code and JSDoc, and missing descriptions for object/interface/compound types.
- `exports` check: fails when public API items are missing from plugin exports discovered during analysis.
- Third-party code under `node_modules/` is ignored for validation.

## JSDoc for destructured parameters.
Use dot-notation `@param` tags to describe each property and include a parent description when helpful. See the JSDoc guidance for parameter properties at https://jsdoc.app/tags-param#parameters-with-properties. Example:

```ts
/** 
 * Greets with provided options.
 * @param options - Greeting options.
 * @param options.name - Name to greet.
 * @param options.nested.emphasis - Whether to emphasize the greeting.
 * @returns Final greeting string.
 */
const greet = ({ name, nested: { emphasis } }: { name: string; nested: { emphasis: boolean } }) => {
  return emphasis ? `Hello, ${name}!` : `Hello, ${name}.`;
};
```
